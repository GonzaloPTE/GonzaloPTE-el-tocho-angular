<div class="text-center">
    <div class="relative max-w-2xl mx-auto">
        <div class="flex items-center shadow-xl rounded-full overflow-hidden border transition-colors duration-300"
            [ngClass]="themeService.isDarkMode() ? 'bg-stone-800 border-stone-700' : 'bg-white border-stone-200'">
            <div class="relative flex-grow">
                <lucide-icon [name]="'search'" class="absolute left-6 top-1/2 transform -translate-y-1/2 text-stone-400"
                    [size]="24"></lucide-icon>
                <input type="text" placeholder="Título, autor, letra, código..."
                    class="w-full pl-20 pr-12 py-6 text-lg border-none focus:ring-0 outline-none transition-colors duration-300 rounded-l-full bg-transparent"
                    [ngClass]="themeService.isDarkMode() ? 'text-stone-100' : 'text-stone-800'" [ngModel]="searchTerm()"
                    (ngModelChange)="searchTerm.set($event)" />
                <lucide-icon *ngIf="searchTerm()" [name]="'x'"
                    class="absolute right-4 top-1/2 transform -translate-y-1/2 cursor-pointer text-stone-400 hover:text-stone-600 dark:hover:text-stone-200 transition-colors"
                    [size]="20" (click)="clearSearch()"></lucide-icon>
            </div>
            <button class="rounded-r-full px-10 py-6 text-lg font-semibold transition-colors duration-300 h-full"
                [ngClass]="themeService.isDarkMode() ? 'bg-stone-700 hover:bg-stone-600 text-stone-100' : 'bg-stone-800 hover:bg-stone-700 text-white'">
                Buscar
            </button>
        </div>
    </div>

    <div *ngIf="searchResults().length > 0"
        class="mt-8 space-y-2 rounded-2xl shadow-xl p-6 border text-left transition-colors duration-300"
        [ngClass]="themeService.isDarkMode() ? 'bg-stone-800 border-stone-700' : 'bg-white border-stone-200'">
        <div *ngFor="let song of searchResults()" (click)="handleSongClick(song.slug)"
            class="flex items-center space-x-6 p-4 transition-all duration-300 cursor-pointer rounded-xl group"
            [ngClass]="themeService.isDarkMode() ? 'hover:bg-stone-700' : 'hover:bg-stone-50'">
            <div class="w-16 h-16 rounded-full flex items-center justify-center font-semibold text-xl shadow-inner transition-colors"
                [ngClass]="themeService.isDarkMode() ? 'bg-stone-700 text-stone-200 group-hover:bg-stone-600' : 'bg-stone-100 text-stone-700 group-hover:bg-stone-200'">
                {{ song.code }}
            </div>
            <div class="flex-grow">
                <p class="font-semibold text-lg mb-1"
                    [ngClass]="themeService.isDarkMode() ? 'text-stone-100' : 'text-stone-800'">
                    {{ song.title }}
                </p>
                <p [ngClass]="themeService.isDarkMode() ? 'text-stone-400' : 'text-stone-500'">
                    {{ song.author }}
                </p>
            </div>
            <lucide-icon [name]="'chevron-right'" class="transition-colors"
                [ngClass]="themeService.isDarkMode() ? 'text-stone-400 group-hover:text-stone-200' : 'text-stone-400 group-hover:text-stone-600'"
                [size]="24"></lucide-icon>
        </div>
    </div>
</div>